{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{cachePageNum2}from'../../redux/actions/page2';import{withRouter}from'react-router-dom';import{Button,Card,Table,message}from'antd';import{unCacheUser}from'../../redux/actions/user';import{getRequestDetails}from'../../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Column=Table.Column;var RequestDetails=/*#__PURE__*/function(_Component){_inherits(RequestDetails,_Component);var _super=_createSuper(RequestDetails);function RequestDetails(){var _this;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={requestDetails:[],loading:false};_this.fetchrequestDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestEntityId){var response,requestDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true});_context.next=3;return getRequestDetails(requestEntityId,requestType);case 3:response=_context.sent;if(response.code===0){requestDetails=response.data;_this.setState({requestDetails:requestDetails,loading:false});}else if(response.code===405){_this.props.unCacheUser();_this.props.history.replace('/launch');}else{message.error(response.msg);_this.setState({loading:false});}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(RequestDetails,[{key:\"componentDidMount\",value:function componentDidMount(){var id=this.props.location.state.id;this.fetchrequestDetails(id);}},{key:\"render\",value:function render(){var _this2=this;var _ref2=this.props.location.state||{},requestType=_ref2.requestType;this.requestType=requestType;var fileName=this.props.location.state.attachmentEntity.fileName;var title=this.requestType==='global_mobility'?\"Globla International Proxy Forms Request Detail - \".concat(fileName):this.requestType==='domestic_mobility'?\"Domestic Proxy Forms Request Detail - \".concat(fileName):\"Proxy Forms Request Detail - \".concat(fileName);var extra=/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){_this2.props.history.goBack();},children:\"Return\"});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{title:title,extra:extra,children:/*#__PURE__*/_jsxs(Table,{dataSource:this.state.requestDetails,bordered:true,pagination:{defaultPageSize:4,showQuickJumper:true,current:this.props.pageNum,onChange:function onChange(current){return _this2.props.cachePageNum2(current);}},loading:this.state.loading,children:[/*#__PURE__*/_jsx(Column,{title:\"Report ID\",dataIndex:\"reportId\"},\"reportId\"),/*#__PURE__*/_jsx(Column,{title:\"Expense Type\",dataIndex:\"expenseType\"},\"expenseType\"),/*#__PURE__*/_jsx(Column,{title:\"Expense Date\",dataIndex:\"expenseDate\"},\"expenseDate\"),/*#__PURE__*/_jsx(Column,{title:\"Amount\",dataIndex:\"expenseAmount\"},\"expenseAmount\"),/*#__PURE__*/_jsx(Column,{title:\"Expense Status\",dataIndex:\"expenseStatusDesc\"},\"expenseStatusDesc\")]})})});}}]);return RequestDetails;}(Component);export default connect(function(state){return{pageNum:state.pageNum2};},{cachePageNum2:cachePageNum2,unCacheUser:unCacheUser})(withRouter(RequestDetails));","map":{"version":3,"sources":["C:/Users/TaoHu/Desktop/前端/workspace/react-admin-client/src/containers/DashboardContent/RequestDetails.jsx"],"names":["React","Component","connect","cachePageNum2","withRouter","Button","Card","Table","message","unCacheUser","getRequestDetails","Column","RequestDetails","state","requestDetails","loading","fetchrequestDetails","requestEntityId","setState","requestType","response","code","data","props","history","replace","error","msg","id","location","fileName","attachmentEntity","title","extra","goBack","defaultPageSize","showQuickJumper","current","pageNum","onChange","pageNum2"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {cachePageNum2} from '../../redux/actions/page2'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { Button, Card, Table, message } from 'antd'\r\nimport { unCacheUser } from '../../redux/actions/user'\r\nimport {getRequestDetails} from '../../api'\r\n\r\nconst { Column } = Table;\r\n\r\nclass RequestDetails extends Component {\r\n    state = {requestDetails:[],loading:false}\r\n\r\n    fetchrequestDetails = async (requestEntityId) => {\r\n        this.setState({loading:true})\r\n        let response = await getRequestDetails(requestEntityId, requestType)\r\n        if(response.code === 0){\r\n            let requestDetails = response.data\r\n            this.setState({requestDetails,loading:false})\r\n        }else if(response.code === 405){\r\n            this.props.unCacheUser()\r\n            this.props.history.replace('/launch')   \r\n        }else{\r\n            message.error(response.msg)\r\n            this.setState({loading:false})\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        let { id } = this.props.location.state\r\n        this.fetchrequestDetails(id)\r\n    }\r\n    \r\n    render() {\r\n        let {requestType} = this.props.location.state || {}\r\n        this.requestType = requestType\r\n\r\n        let { fileName } = this.props.location.state.attachmentEntity\r\n        const title = this.requestType === 'global_mobility' ? `Globla International Proxy Forms Request Detail - ${fileName}` :\r\n                      this.requestType === 'domestic_mobility' ? `Domestic Proxy Forms Request Detail - ${fileName}` :\r\n                                           `Proxy Forms Request Detail - ${fileName}` ;\r\n\r\n        const extra = (\r\n            <Button type='primary' onClick={() => { this.props.history.goBack() }}>Return</Button>\r\n        )\r\n        return (\r\n            <div>\r\n                <Card title={title} extra={extra}>\r\n                    <Table\r\n                        dataSource={this.state.requestDetails}\r\n                        bordered\r\n                        pagination={{ defaultPageSize: 4, showQuickJumper: true, current: this.props.pageNum, onChange: (current) => this.props.cachePageNum2(current) }}\r\n                        loading={this.state.loading}\r\n                    >\r\n                        <Column title=\"Report ID\" dataIndex=\"reportId\" key=\"reportId\"/>\r\n                        <Column title=\"Expense Type\" dataIndex=\"expenseType\" key=\"expenseType\" />\r\n                        <Column title=\"Expense Date\" dataIndex=\"expenseDate\" key=\"expenseDate\" />\r\n                        <Column title=\"Amount\" dataIndex=\"expenseAmount\" key=\"expenseAmount\" />\r\n                        <Column title=\"Expense Status\" dataIndex=\"expenseStatusDesc\" key=\"expenseStatusDesc\" />\r\n                    </Table>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    state => ({pageNum:state.pageNum2}),\r\n    {cachePageNum2, unCacheUser}\r\n)(withRouter(RequestDetails))\r\n"]},"metadata":{},"sourceType":"module"}