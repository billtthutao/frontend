{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Button}from'antd';import React,{Component}from'react';import{connect}from'react-redux';import{Card,message}from'antd';import{withRouter}from'react-router-dom';import ReactEcharts from'echarts-for-react';import{unCacheUser}from'../../redux/actions/user';import{getStatistics}from'../../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RequestStatistics=/*#__PURE__*/function(_Component){_inherits(RequestStatistics,_Component);var _super=_createSuper(RequestStatistics);function RequestStatistics(props){var _this;_classCallCheck(this,RequestStatistics);_this=_super.call(this,props);_this.updateChart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestType){var response,statistics;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStatistics(requestType);case 2:response=_context.sent;if(response.code===0){statistics=response.data.statistics;_this.setState({statistics:statistics});}else if(response.code===405){_this.props.unCacheUser();_this.props.history.replace('/launch');}else{message.error(response.msg);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getOption=function(){var option={title:{text:_this.requestType==='global_mobility'?'Global-Int Request Total':_this.requestType==='domestic_mobility'?'Domestic Request Total':'xxxxx Request Total'},tooltip:{},legend:{data:['Total']},xAxis:{data:[\"1+ Years\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]},yAxis:{},series:[{name:'Total',type:'bar',data:_this.state.statistics}]};return option;};_this.state={statistics:[0,0,0,0,0,0,0,0,0,0,0,0,0]};var _ref2=_this.props.location.state||{},_requestType=_ref2.requestType;_this.updateChart(_requestType);return _this;}_createClass(RequestStatistics,[{key:\"render\",value:function render(){var _this2=this;var _ref3=this.props.location.state||{},requestType=_ref3.requestType;this.requestType=requestType;var title=this.requestType==='global_mobility'?'Global International Request Statistics':this.requestType==='domestic_mobility'?'Domestic Request Statistics':'xxxxx Request Statistics';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return _this2.updateChart(_this2.requestType);},children:\"Update\"})}),/*#__PURE__*/_jsx(Card,{title:title,children:/*#__PURE__*/_jsx(ReactEcharts,{option:this.getOption()})})]});}}]);return RequestStatistics;}(Component);export default connect(function(state){return{};},{unCacheUser:unCacheUser})(withRouter(RequestStatistics));","map":{"version":3,"sources":["C:/Users/TaoHu/Desktop/前端/workspace/react-admin-client/src/containers/DashboardContent/RequestStatistics.jsx"],"names":["Button","React","Component","connect","Card","message","withRouter","ReactEcharts","unCacheUser","getStatistics","RequestStatistics","props","updateChart","requestType","response","code","statistics","data","setState","history","replace","error","msg","getOption","option","title","text","tooltip","legend","xAxis","yAxis","series","name","type","state","location"],"mappings":"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","sourcesContent":["import { Button } from 'antd'\r\nimport React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {Card, message} from 'antd'\r\nimport { withRouter } from 'react-router-dom'\r\nimport ReactEcharts from 'echarts-for-react'\r\nimport { unCacheUser } from '../../redux/actions/user'\r\nimport {getStatistics} from '../../api'\r\n    \r\nclass RequestStatistics extends Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {statistics:[0,0,0,0,0,0,0,0,0,0,0,0,0]} \r\n        let {requestType} = this.props.location.state || {}\r\n        this.updateChart(requestType) \r\n    }\r\n\r\n    updateChart = async (requestType) => {\r\n        let response = await getStatistics(requestType)\r\n        if(response.code === 0){\r\n            let statistics = response.data.statistics\r\n            this.setState({statistics})\r\n        }else if(response.code === 405){\r\n            this.props.unCacheUser()\r\n            this.props.history.replace('/launch')   \r\n        }else{\r\n            message.error(response.msg)\r\n        }\r\n    }\r\n\r\n    getOption = () => {\r\n        var option = {\r\n            title: {\r\n                text: this.requestType === 'global_mobility' ? 'Global-Int Request Total' : \r\n                      this.requestType === 'domestic_mobility' ? 'Domestic Request Total' :\r\n                                           'xxxxx Request Total'\r\n            },\r\n            tooltip: {},\r\n            legend: {\r\n                data:['Total']\r\n            },\r\n            xAxis: {\r\n                data: [\"1+ Years\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                name: 'Total',\r\n                type: 'bar',\r\n                data: this.state.statistics\r\n            }]\r\n        };\r\n\r\n        return option;\r\n    }\r\n    render() {\r\n\r\n        let {requestType} = this.props.location.state || {}\r\n        this.requestType = requestType \r\n\r\n        const title = this.requestType === 'global_mobility' ? 'Global International Request Statistics' :\r\n                      this.requestType === 'domestic_mobility' ? 'Domestic Request Statistics' :\r\n                                           'xxxxx Request Statistics';\r\n\r\n        return (\r\n            <div>\r\n                <Card>\r\n                    <Button type='primary' onClick={()=>this.updateChart(this.requestType)}>Update</Button>\r\n                </Card>\r\n                <Card title={title}>\r\n                    <ReactEcharts option={this.getOption()} />\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    state => ({}),\r\n    {unCacheUser}\r\n)(withRouter(RequestStatistics))\r\n"]},"metadata":{},"sourceType":"module"}