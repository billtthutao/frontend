{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/TaoHu/Desktop/\\u524D\\u7AEF/workspace/react-admin-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,DatePicker,message}from'antd';import{unCacheUser}from'../../redux/actions/user';import ReactEcharts from'echarts-for-react';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import'./Home.less';import{getGiStatistics,getDoStatistics}from'../../api';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var RangePicker=DatePicker.RangePicker;var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.getGiChart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,gistatistics,giTotal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getGiStatistics();case 2:response=_context.sent;if(response.code===0){gistatistics=response.data.gistatistics;giTotal=response.data.giTotal;_this.setState({gistatistics:gistatistics,giTotal:giTotal});}else if(response.code===405){_this.props.unCacheUser();_this.props.history.replace('/launch');}else{message.error(response.msg);}case 4:case\"end\":return _context.stop();}}},_callee);}));_this.getDoChart=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,dostatistics,doTotal;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getDoStatistics();case 2:response=_context2.sent;if(response.code===0){dostatistics=response.data.dostatistics;doTotal=response.data.doTotal;_this.setState({dostatistics:dostatistics,doTotal:doTotal});}else if(response.code===405){_this.props.unCacheUser();_this.props.history.replace('/launch');}else{message.error(response.msg);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));_this.getOptionForGrantTotal=function(){var option={title:{text:'Grant Total'},tooltip:{trigger:'axis'},legend:{data:['Global-Int','Domestic']},grid:{left:'3%',right:'4%',bottom:'3%',containLabel:true},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:'category',boundaryGap:false,data:[\"1+ Years\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]},yAxis:{type:'value'},series:[{name:'Global-Int',type:'line',// stack: 'Total',\ndata:_this.state.gistatistics},{name:'Domestic',type:'line',// stack: 'Total',\ndata:_this.state.dostatistics}]};return option;};_this.state={dostatistics:[0,0,0,0,0,0,0,0,0,0,0,0,0],gistatistics:[0,0,0,0,0,0,0,0,0,0,0,0,0],giTotal:0,doTotal:0};_this.getGiChart();_this.getDoChart();return _this;}_createClass(Home,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grantTotal\",children:[/*#__PURE__*/_jsxs(Card,{title:\"Proxy Forms Request Total\",style:{width:250},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Global-Int: \",this.state.giTotal]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Domestic: \",this.state.doTotal]})]}),/*#__PURE__*/_jsx(ReactEcharts,{option:this.getOptionForGrantTotal()})]})});}}]);return Home;}(Component);export default connect(function(state){return{user:state.user};},{unCacheUser:unCacheUser})(withRouter(Home));","map":{"version":3,"sources":["C:/Users/TaoHu/Desktop/前端/workspace/react-admin-client/src/containers/Home/Home.jsx"],"names":["React","Component","Card","DatePicker","message","unCacheUser","ReactEcharts","withRouter","connect","getGiStatistics","getDoStatistics","RangePicker","Home","props","getGiChart","response","code","gistatistics","data","giTotal","setState","history","replace","error","msg","getDoChart","dostatistics","doTotal","getOptionForGrantTotal","option","title","text","tooltip","trigger","legend","grid","left","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","type","boundaryGap","yAxis","series","name","state","width","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Card, DatePicker, message } from 'antd'\r\nimport { unCacheUser } from '../../redux/actions/user'\r\nimport ReactEcharts from 'echarts-for-react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport './Home.less'\r\nimport {getGiStatistics, getDoStatistics} from '../../api'\r\n\r\nconst { RangePicker } = DatePicker;\r\n\r\nclass Home extends Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {dostatistics:[0,0,0,0,0,0,0,0,0,0,0,0,0],gistatistics:[0,0,0,0,0,0,0,0,0,0,0,0,0],giTotal: 0, doTotal: 0} \r\n        this.getGiChart()  \r\n        this.getDoChart()\r\n    }\r\n\r\n    getGiChart = async () => {\r\n        let response = await getGiStatistics()\r\n        if(response.code === 0){\r\n            let gistatistics = response.data.gistatistics\r\n            let giTotal = response.data.giTotal\r\n            this.setState({gistatistics,giTotal})\r\n        }else if(response.code === 405){\r\n            this.props.unCacheUser()\r\n            this.props.history.replace('/launch')   \r\n        }else{\r\n            message.error(response.msg)\r\n        }\r\n    }\r\n\r\n    getDoChart = async () => {\r\n        let response = await getDoStatistics()\r\n        if(response.code === 0){\r\n            let dostatistics = response.data.dostatistics\r\n            let doTotal = response.data.doTotal\r\n            this.setState({dostatistics,doTotal})\r\n        }else if(response.code === 405){\r\n            this.props.unCacheUser()\r\n            this.props.history.replace('/launch')   \r\n        }else{\r\n            message.error(response.msg)\r\n        }\r\n    }\r\n\r\n    getOptionForGrantTotal = () => {\r\n        var option = {\r\n            title: {\r\n                text: 'Grant Total'\r\n            },\r\n            tooltip: {\r\n                trigger: 'axis'\r\n            },\r\n            legend: {\r\n                data: ['Global-Int', 'Domestic']\r\n            },\r\n            grid: {\r\n                left: '3%',\r\n                right: '4%',\r\n                bottom: '3%',\r\n                containLabel: true\r\n            },\r\n            toolbox: {\r\n                feature: {\r\n                    saveAsImage: {}\r\n                }\r\n            },\r\n            xAxis: {\r\n                type: 'category',\r\n                boundaryGap: false,\r\n                data: [\"1+ Years\",\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\r\n            },\r\n            yAxis: {\r\n                type: 'value'\r\n            },\r\n            series: [\r\n                {\r\n                    name: 'Global-Int',\r\n                    type: 'line',\r\n                    // stack: 'Total',\r\n                    data: this.state.gistatistics\r\n                },\r\n                {\r\n                    name: 'Domestic',\r\n                    type: 'line',\r\n                    // stack: 'Total',\r\n                    data: this.state.dostatistics\r\n                },\r\n            ]\r\n        };\r\n\r\n        return option;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='home'>\r\n                <div className=\"grantTotal\">\r\n                    <Card title='Proxy Forms Request Total' style={{ width: 250 }}>\r\n                        <p>Global-Int: {this.state.giTotal}</p>\r\n                        <p>Domestic: {this.state.doTotal}</p>\r\n                    </Card>\r\n                    <ReactEcharts option={this.getOptionForGrantTotal()} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    state => ({ user: state.user }),\r\n    { unCacheUser }\r\n)(withRouter(Home))\r\n"]},"metadata":{},"sourceType":"module"}