"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _object = _interopRequireDefault(require("object.assign"));

require("react");

var _tinyLine = require("@antv/g2plot/lib/plots/tiny-line");

var _get = _interopRequireDefault(require("@antv/util/lib/get"));

var _set = _interopRequireDefault(require("@antv/util/lib/set"));

var _createPlot = _interopRequireDefault(require("../createPlot"));

var _polyfill = require("./core/polyfill");

var _util = require("@antv/util");

var polyfill = function polyfill(opt) {
  var options = (0, _polyfill.polyfillOptions)(opt);

  if (!(0, _util.isNil)(options.yField)) {
    // yField不是null/undefined
    var list = options.data.map(function (item) {
      return item[options.yField];
    }).filter(function (val) {
      return !(0, _util.isNil)(val);
    });
    list && list.length && (0, _set["default"])(options, 'data', list);
  }

  var size = (0, _get["default"])(options, 'size');

  if (!(0, _util.isNil)(size)) {
    var lineStyle = (0, _get["default"])(options, 'lineStyle', {});
    (0, _set["default"])(options, 'lineStyle', (0, _object["default"])((0, _object["default"])({}, lineStyle), {
      lineWidth: size
    }));
  }

  (0, _set["default"])(options, 'tooltip', false);
  return options;
};

var _default2 = (0, _createPlot["default"])(_tinyLine.TinyLine, 'TinyLineChart', polyfill);

exports["default"] = _default2;